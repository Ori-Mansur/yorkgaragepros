<div class="contact-card">
    <h2>Send Us a Message</h2>
    <form id="contactForm">
        <div class="form-inputs">
            <div class="input-container">
                <input
                    type="text"
                    id="fullName"
                    name="name"
                    placeholder="Full Name"
                    required
                />
            </div>
            <div class="input-container">
                <input
                    type="tel"
                    id="phone"
                    name="phone"
                    placeholder="Phone"
                    required
                />
            </div>
        </div>
        <div class="form-inputs">
            <input
                type="email"
                id="email"
                name="email"
                placeholder="Email Address"
                required
            />
            <select id="service" name="service" required>
                <option value="" disabled selected
                    >Select Service Interest...</option
                >
                <option value="Door_Repair"
                    >24/7 Door Repair / Broken Spring</option
                >
                <option value="Door_Installation"
                    >New Garage Door Installation</option
                >
                <option value="Epoxy_Floor"
                    >Epoxy Floor Coating / Sealing</option
                >
                <option value="Opener_Service"
                    >Garage Door Opener Service</option
                >
                <option value="General_Inquiry">General Inquiry / Quote</option>
            </select>
        </div>
        <textarea
            rows="5"
            id="notes"
            name="notes"
            placeholder="Message / Project Details"
            required></textarea>
        <button type="submit">Send Inquiry</button>
    </form>
</div>
<style>
    .contact-card {
        background: #fff;
        padding: 24px;
        border-radius: 12px;
        box-shadow: var(--shadow-trust);
    }
    .contact-card h2 {
        margin-bottom: 16px;
        color: var(--navy);
        font-size: 1.25rem;
    }
    /* ========== Form Styles ========== */
    form input,
    form select,
    form textarea {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 2px solid #e5e7eb;
        margin-bottom: 12px;
        font-size: 1rem;
        transition: 0.2s;
        font-family: "Montserrat";
    }

    form input:focus,
    form select:focus,
    form textarea:focus {
        border-color: var(--gold);
        outline: none;
    }
    .form-inputs {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    .input-container {
        width: 50%;
    }
    .form-inputs input {
        display: block;
        width: 100%;
    }
    .form-inputs select {
        display: block;

        /* width: 330px; */
    }
    form button {
        width: 100%;
        padding: 12px;
        background: var(--gold);
        color: var(--navy);
        font-family: "Montserrat-Bold";
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: 0.2s;
    }
    form button:hover {
        background: #d69f00;
    }
</style>
<script type="module" src="/src/js/dbService.js"></script>
<script type="module">
    // import { saveLeadToFirestore } from '../js/dbService.js';
    import { saveLeadToFirestore } from "/src/js/dbService.js";
    document
        .getElementById("contactForm")
        .addEventListener("submit", async function (e) {
            console.log("unde");

            e.preventDefault();

            const service = document.getElementById("service").value;
            // if (!service)
            //     return showMessage("Error", "Please select a service.");

            const fullName = document.getElementById("fullName").value;
            // if (garage.required && !garage.value)
            //     return showMessage("Error", "Garage size required.");

            const phone = document.getElementById("phone").value;
            // if (!phone) return showMessage("Error", "Phone required.");

            const formData = {
                service: service,
                fullName: fullName,
                phone: phone,
                email: document.getElementById("email").value,
                notes: document.getElementById("notes").value,
            };
            const result = await saveLeadToFirestore(
                "contacts",
                formData,
                "contactForm",
            );
            if (result.success) {
                // alert("Thank you! Your message has been sent.");
                this.reset();
                // contactForm.reset();
                // Redirect logic for GA4 tracking
                // window.location.href = '/thank-you/'; 
            } else {
                alert(`Error submitting form: ${result.error}`);
            }

          
        });
</script>
